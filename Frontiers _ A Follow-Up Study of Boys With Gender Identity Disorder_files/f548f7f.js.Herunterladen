(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1579:function(t,e,n){"use strict";n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return j})),n.d(e,"c",(function(){return x})),n.d(e,"d",(function(){return _}));n(56);var r=n(2),c=n(5),o=n(7),l=n(26),f=n(27),h=n(12),d=(n(35),n(88),n(80),n(440),n(38),n(1580));function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var c=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var m=function(t){Object(l.a)(h,t);var e,n,f=v(h);function h(){return Object(c.a)(this,h),f.apply(this,arguments)}return Object(o.a)(h,[{key:"getFigshareResponse",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.post("/api/v3/articles/figshare",{doi:e}).then((function(t){n=t.data})).catch((function(t){console.error("Figshare fails. ".concat(t.message))}));case 2:return t.abrupt("return",n);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getSupplementalDataFiles",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return new URLSearchParams,n="/api/v3/articles/".concat(e,"/supplemental-data"),r=[],t.next=5,this.$axios.get(n).then((function(t){r=t.data})).catch((function(t){console.error("Error getting supplementary files by articleId. ".concat(t.message))}));case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),h}(d.a),y=m;n(29);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var c=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var w=function(t){Object(l.a)(n,t);var e=O(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getArticleSubscriptionStatus",value:function(t){var e=this,n="/api/v3/articles/article-subscription/".concat(t,"/status");return new Promise((function(r,c){e.$axios.get(n).then((function(t){r(t.data)})).catch((function(e){var n;401!==(null===(n=e.response)||void 0===n?void 0:n.status)&&console.error("Error getting article with id ".concat(t," subscription status. Error: ").concat(e.message)),c(e)}))}))}},{key:"subscribeLoggedUser",value:function(t,e){var n=this,r="/api/v3/articles/article-subscription/".concat(t,"/subscribe-logged-user");return new Promise((function(c,o){n.$axios.post(r,{emailAddress:e}).then((function(t){c(t.data)})).catch((function(n){console.error("Error in subscribeLoggedUser with email ".concat(e," for article with id ").concat(t,". Error: ").concat(n.message)),o(n)}))}))}},{key:"subscribeAnonymousUser",value:function(t,e,n){var r=this,c="/api/v3/articles/article-subscription/".concat(t,"/subscribe-user");return new Promise((function(o,l){r.$axios.post(c,{emailAddress:e,recaptchaResponse:n}).then((function(t){o(t.data)})).catch((function(n){console.error("Error in subscribeAnonymousUser with email ".concat(e," for article with id ").concat(t,". Error: ").concat(n.message)),l(n)}))}))}}]),n}(d.a),j=w;function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var c=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var k=function(t){Object(l.a)(n,t);var e=R(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getUserEmailAddresses",value:function(){var t=this;return new Promise((function(e,n){t.$axios.get("/api/v3/articles/logged-user/email-addresses").then((function(t){e(t.data)})).catch((function(t){var e;401!==(null===(e=t.response)||void 0===e?void 0:e.status)&&console.error("Error getting user email addresses. Error: ".concat(t.message)),n(t)}))}))}}]),n}(d.a),x=k;function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var c=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var A=function(t){Object(l.a)(n,t);var e=S(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"getPeopleAlsoLookAtArticles",value:function(t){var e=this,n="/api/v3/articles/people-also-look-at/".concat(t);return new Promise((function(t,r){e.$axios.get(n).then((function(e){t(e.data)})).catch((function(t){r(t)}))}))}},{key:"updateRecommendedArticle",value:function(t){var e=this,n="/api/v3/articles/people-also-look-at/".concat(t);return new Promise((function(t,r){e.$axios.post(n).then((function(){t()})).catch((function(t){r(t)}))}))}},{key:"setPalaCookie",value:function(t){var e=this,n="/api/v3/articles/people-also-look-at/set-pala-cookie/".concat(t);return new Promise((function(t,r){e.$axios.post(n).then((function(){t()})).catch((function(t){r(t)}))}))}}]),n}(d.a),_=A},1580:function(t,e,n){"use strict";var r=n(5);n(29);e.a=function t(e){Object(r.a)(this,t),this.$axios=e,this.$axios.setBaseURL("".concat(location.protocol,"//").concat(location.host))}},1609:function(t,e,n){"use strict";n.r(e);n(56);var r=n(2),c=n(5),o=n(7),l=n(26),f=n(27),h=n(12),d=n(34),v=(n(38),n(91),n(1642),n(48)),m=n(14),y=n(1579),O=n(32);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var c=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var j=function(t,e,n,desc){var r,c=arguments.length,o=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(o=(c<3?r(o):c>3?r(e,n,o):r(e,n))||o);return c>3&&o&&Object.defineProperty(e,n,o),o},R=function(t){Object(l.a)(h,t);var e,n,f=w(h);function h(){var t;return Object(c.a)(this,h),(t=f.apply(this,arguments)).isFigshareAvailable=!1,t.supplementalFiles=[],t}return Object(o.a)(h,[{key:"currentArticle",get:function(){return this.$store.state.currentArticle}},{key:"hasSupplementalData",get:function(){return this.$store.state.hasSupplementalData}},{key:"isVisibleModalOnUpdate",value:function(){this.isVisibleModal&&this.loadFigshareOrSupplementalData()}},{key:"onUrlChange",value:function(){this.updateHasSupplementalData()}},{key:"closeModal",value:function(){this.$emit("close")}},{key:"loadFigshareOrSupplementalData",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$store.state.settingsFeaturesSwitchers.enableFigshare,n=this.currentArticle.doi,!e){t.next=18;break}return r=new y.b(this.$axios),t.next=6,r.getFigshareResponse(n);case 6:if(this.figshare=t.sent,this.isFigshareAvailable=this.figshare&&this.figshare.length>0&&window.figshare,!this.isFigshareAvailable){t.next=18;break}return t.prev=9,t.next=12,Object(O.c)();case 12:window.figshare.load("frontiers",(function(t){var e=document.getElementById("figshare-widget-container"),r=new t({resourceDOI:n,showStats:!1});r.initialize(),r.mount(e),window.widget=r})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),this.isFigshareAvailable=!1;case 18:return t.next=20,this.getSupplementalFiles();case 20:this.updateHasSupplementalData();case 21:case"end":return t.stop()}}),t,this,[[9,15]])}))),function(){return n.apply(this,arguments)})},{key:"getSupplementalFiles",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isFigshareAvailable||this.supplementalFiles.length){t.next=5;break}return e=new y.b(this.$axios),t.next=4,e.getSupplementalDataFiles(this.currentArticle.id);case 4:this.supplementalFiles=t.sent;case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"updateHasSupplementalData",value:function(){var t=this.isFigshareAvailable||this.supplementalFiles.length>0;this.$store.commit("UPDATE_HAS_SUPPLEMENTAL_DATA",t),t||"#supplementary-material"!==window.location.hash||this.showSnackBar()}},{key:"mounted",value:function(){this.$isServer||this.loadFigshareOrSupplementalData()}},{key:"showSnackBar",value:function(){this.$store.commit("components/UPDATE_SNACKBAR_ITEMS",[{messageType:"Error",message:"There is no supplementary material currently available for this article"}])}}]),h}(v.Vue);j([Object(v.Prop)({required:!0})],R.prototype,"isVisibleModal",void 0),j([Object(v.Watch)("isVisibleModal")],R.prototype,"isVisibleModalOnUpdate",null),j([Object(v.Watch)("$route",{immediate:!1,deep:!0})],R.prototype,"onUrlChange",null);var k=R=j([Object(v.Component)({components:{Button:m.c.Button,Modal:m.f.Modal}})],R),x=n(104),component=Object(x.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasSupplementalData?n("div",{staticClass:"SupplementalData"},[n("modal",{class:{"Modal--figshare":t.isFigshareAvailable},attrs:{show:t.isVisibleModal,title:"Supplementary Material"},on:{close:t.closeModal},scopedSlots:t._u([{key:"body",fn:function(){return[t.isFigshareAvailable?[n("div",{attrs:{id:"figshare-widget-container"}})]:[n("ul",{staticClass:"SupplementalData__list"},t._l(t.supplementalFiles,(function(e,r){return n("li",{key:r,staticClass:"SupplementalData__file"},[n("p",{staticClass:"SupplementalData__file__name"},[t._v(t._s(e.name))]),t._v(" "),n("a",{staticClass:"SupplementalData__file__download",attrs:{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",download:""}})])})),0)]]},proxy:!0}],null,!1,3399804961)})],1):t._e()}),[],!1,null,null,null);e.default=component.exports},1642:function(t,e,n){}}]);